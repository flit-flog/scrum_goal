<div>
  <h2>チーム</h2>
  <table class="table table-hover table-inverse">
    <thead>
      <tr>
        <th></th>
        <th>チーム名</th>
        <th>チームリーダー</th>
        <th>紹介文</th>
        <th>メンバー</th>
        <th colspan="3"></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><%= image_tag @team.get_team_image(100,100) %></td>
          <td><%= @team.name %></td>
          <td><%= @team.owner.name %></td>
          <td><%= @team.introduction %></td>
          <td>
            <!-- @teamは中間テーブルを挟んでusersテーブルを見ている。-->
            <% @team.users.each do |member| %>
              <li style="list-style: none;"><%= member.name %></li>
            <% end %>
          </td>
          <td>
            <!-- @groupに紐づいたgroup_user（user_idカラムに自分のIDを持っている）があるかどうかを確かめる。-->
            <% if @team.team_users.exists?(user_id: current_user.id) %>
              <!-- group_usersコントローラーの#destroyアクションを発動　@groupからgroup_user(自分)を消す -->
              <%= link_to '脱退する', team_team_users_path(@team), method: :delete, class: "btn btn-sm btn-danger" , data: { confirm: "本当にグループを退出しますか？" }%>
            <% elsif @team.permits.exists?(user_id: current_user.id) %>
              <%= link_to '申請取消', team_permits_path(@team), method: :delete, class: "btn btn-sm btn-danger" %>
            <% else %>
              <%= link_to '参加申請', team_permits_path(@team), method: :post, class: "btn btn-sm btn-success" %>
            <% end %>
          </td>
        </tr>
    </tbody>
  </table>
  <div>
    <% if @team.owner_id == current_user.id %>
      <%= link_to "承認待ち一覧",permits_path(@team),class: "btn btn-sm btn-succes" %>
      <%= link_to "チーム編集", edit_team_path(@team), class: "btn btn-sm btn-success" %>
      <%#= link_to "チーム削除", team_path(@team), method: :delete, class: "btn btn-sm btn-danger",, data: { confirm: "本当に削除しますか？" } %>
    <% end %>
          
  </div>
</div>